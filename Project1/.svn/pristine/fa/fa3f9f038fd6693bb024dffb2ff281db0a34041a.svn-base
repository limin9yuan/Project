<!DOCTYPE html>
<html>
<meta charset="utf-8">
<head th:include="include :: header">
<meta name="keywords" content="">
<meta name="description" content="">
<link rel="shortcut icon" href="favicon.ico">
<link href="/css/bootstrap.min.css?v=3.3.6" rel="stylesheet">
<link href="/css/font-awesome.css?v=4.4.0" rel="stylesheet">
<link href="/css/animate.css" rel="stylesheet">
<link href="/css/layui.css" rel="stylesheet">
<link href="/css/style.css?v=4.1.0" rel="stylesheet">
</head>
<body class="gray-bg">
	<div class="wrapper wrapper-content ">
		<div class="row">
			<div class="col-sm-12">
				<div class="ibox float-e-margins">
					<div class="ibox-content">
						<!-- 					<h1>请您详细填写以下表格，我们将与您联系，协助解决问题，感谢您的宝贵意见。</h1> -->
						<!-- 					<hr style="border:1px dotted #036" /> -->
						<form class="form-horizontal m-t" id="signupForm">
							<input id="feedbackId" name="feedbackId"
								th:value="${onlineFeedback.feedbackId}" type="hidden"> <input
								id="ids" name="ids" type="hidden" value="-1"
								class="form-control">
							<div class="form-group">
								<!-- <label class="col-sm-3 control-label">反馈内容分类：</label>
								<div class="col-sm-3">
									<label class="radio-inline"> <input type="radio"
										name="feedbackCategory" value="0" /> Bug
									</label> <label class="radio-inline"> <input type="radio"
										name="feedbackCategory" value="1" /> 新需求
									</label>
								</div> -->
								<label class="col-sm-4 control-label">反馈内容分类：<span
									class="mustin">*</span></label>
								<div class="col-sm-5">
									<input id="feedbackCategory" name="feedbackCategory"
										readonly="readonly" type="text"
										th:value="${onlineFeedback.feedbackCategory}"
										class="form-control">
									<!-- 
									<input id="projectSales" name="projectSales" class="form-control" type="text">
									 -->
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-4 control-label">手机：<span
									class="mustin">*</span></label>
								<div class="col-sm-5">
									<input id="feedbackPhoneNumber" name="feedbackPhoneNumber"
										readonly="readonly"
										th:value="${onlineFeedback.feedbackPhoneNumber}"
										class="form-control" type="text">
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-4 control-label">邮箱：<span
									class="mustin">*</span></label>
								<div class="col-sm-5">
									<input id="feedbackMailbox" name="feedbackMailbox"
										readonly="readonly"
										th:value="${onlineFeedback.feedbackMailbox}"
										class="form-control" type="text">
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-4 control-label">姓名：<span
									class="mustin">*</span></label>
								<div class="col-sm-5">
									<input id="feedbackName" name="feedbackName"
										readonly="readonly" th:value="${onlineFeedback.feedbackName}"
										class="form-control" type="text">
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-4 control-label">公司名称：<span
									class="mustin">*</span></label>
								<div class="col-sm-5">
									<input id="feedbackCompanyName" name="feedbackCompanyName"
										readonly="readonly"
										th:value="${onlineFeedback.feedbackCompanyName}"
										class="form-control" type="text">
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-4 control-label">使用产品：<span
									class="mustin">*</span></label>
								<div class="col-sm-5">
									<input id="feedbackProduct" name="feedbackProduct"
										readonly="readonly"
										th:value="${onlineFeedback.feedbackProduct}"
										class="form-control" type="text">
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-4 control-label">问题描述：<span
									class="mustin">*</span></label>
								<div class="col-sm-5">
									<textarea id="feedbackDescription" name="feedbackDescription"
										readonly="readonly" class="form-control" rows="3"></textarea>
								</div>
							</div>
<!-- 							<div class="form-group"> -->
<!-- 								<label class="col-sm-4 control-label">附件：</label> -->
<!-- 								<div class="col-sm-4"> -->
<!-- 									<div class="file-manager"> -->
<!-- 										<button -->
<!-- 											shiro:hasPermission="sales:onlineFeedback:onlineFeedback" -->
<!-- 											onclick="window.open('/sales/onlineFeedback/downLoadZipFile?id='+$('#feedbackAttachment').val())" -->
<!-- 											type="button" class="btn btn-danger "> -->
<!-- 											<i class="glyphicon glyphicon-cloud-download"></i>下载全部附件 -->
<!-- 										</button> -->
<!-- 										<input id="feedbackAttachment" name="feedbackAttachment" -->
<!-- 											type="hidden" th:value="${feedbackAttachment}"> -->
<!-- 									</div> -->
<!-- 								</div> -->
<!-- 							</div> -->
							<!--***************文件显示*************************** -->
<!-- 							<div class="form-group" id="app"> -->
<!-- 								<label class="col-sm-4 control-label"></label> -->
<!-- 								<div class="col-sm-8 animated fadeInRight"> -->
<!-- 									<div class="row"> -->
<!-- 										<div class="col-sm-12"> -->
<!-- 											<div class="file-box" v-for="row in rows"> -->
<!-- 												<div class="file"> -->
<!-- 													<span class="corner"></span> -->
<!-- 															xlsx表格 -->
<!-- 													<div class="image" v-if="row.suffix==1"> -->
<!-- 														<img id="fileImg" alt="文件" class="img-responsive" -->
<!-- 															src="/img/fileImage/xlsxImage.png" -->
<!-- 															onclick="previewImg(this)" style="cursor: pointer"> -->
<!-- 													</div> -->
<!-- 															word文档 -->
<!-- 													<div class="image" v-else-if="row.suffix==2"> -->
<!-- 														<img id="fileImg" alt="文件" class="img-responsive" -->
<!-- 															src="/img/fileImage/docxImage.png" -->
<!-- 															onclick="previewImg(this)" style="cursor: pointer"> -->
<!-- 													</div> -->
<!-- 															视频文件 -->
<!-- 													<div class="image" v-else-if="row.suffix==3"> -->
<!-- 														<img id="fileImg" alt="文件" class="img-responsive" -->
<!-- 															src="/img/fileImage/videoImage.jpg" -->
<!-- 															onclick="previewImg(this)" style="cursor: pointer"> -->
<!-- 													</div> -->
<!-- 															图片 -->
<!-- 													<div class="image" v-else-if="row.suffix==4"> -->
<!-- 														<img id="fileImg" alt="文件" class="img-responsive" -->
<!-- 															:src="row.url" onclick="previewImg(this)" -->
<!-- 															style="cursor: pointer"> -->
<!-- 													</div> -->
<!-- 															压缩文件 -->
<!-- 													<div class="image" v-else-if="row.suffix==5"> -->
<!-- 														<img id="fileImg" alt="文件" class="img-responsive" -->
<!-- 															src="/img/fileImage/rarImage.jpeg" -->
<!-- 															onclick="previewImg(this)" style="cursor: pointer"> -->
<!-- 													</div> -->
<!-- 															其他文件 -->
<!-- 													<div class="image" v-else-if="row.suffix==6"> -->
<!-- 														<img id="fileImg" alt="文件" class="img-responsive" -->
<!-- 															src="/img/fileImage/fileImage.png" -->
<!-- 															onclick="previewImg(this)" style="cursor: pointer"> -->
<!-- 													</div> -->
<!-- 													<div class="file-name"> -->
<!-- 														<br /> <small>{{row.fileName}}</small> <br /> <small>{{row.createDate}}</small> -->
<!-- 													</div> -->
<!-- 													&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; -->
<!-- 													&nbsp; &nbsp; &nbsp; -->
<!-- 													<button class="btn btn-warning btn-xs " -->
<!-- 														@click="window.open('/sales/onlineFeedback/down?fileName='+row.fileName)" -->
<!-- 														type="button">下载</button> -->

<!-- 																										<button class="btn btn-danger btn-xs" -->
<!-- 																											@click="removeFile(row.id)" type="button">删除</button> -->
<!-- 																												</a> -->
<!-- 												</div> -->
<!-- 											</div> -->
<!-- 											<div id="incomeNum"></div> -->
<!-- 										</div> -->
<!-- 									</div> -->
<!-- 									<div> -->
<!-- 										<ul id="page"></ul> -->
<!-- 									</div> -->
<!-- 								</div> -->
<!-- 							</div> -->
							<!-- 							<div class="form-group">	 -->
							<!-- 								<label class="col-sm-2 control-label"></label> -->
							<!-- 								<div class="col-sm-8"> -->
							<!-- 									<h1>通过提交该表单，表明我同意海心可以通过上述信息处理我的数据。</h1> -->
							<!-- 								</div> -->
							<!-- 							</div> -->
							<!-- 
														<div class="form-group">	
								<label class="col-sm-3 control-label">反馈处理状态：</label>
								<div class="col-sm-8">
									<input id="feedbackExcuteStatus" name="feedbackExcuteStatus" th:value="${onlineFeedback.feedbackExcuteStatus}" class="form-control" type="text">
								</div>
							</div>
														<div class="form-group">	
								<label class="col-sm-3 control-label">反馈处理状态描述：</label>
								<div class="col-sm-8">
									<input id="feedbackExcuteDescription" name="feedbackExcuteDescription" th:value="${onlineFeedback.feedbackExcuteDescription}" class="form-control" type="text">
								</div>
							</div>
														<div class="form-group">	
								<label class="col-sm-3 control-label">反馈处理时间：</label>
								<div class="col-sm-8">
									<input id="feedbackExcuteTime" name="feedbackExcuteTime" th:value="${onlineFeedback.feedbackExcuteTime}" class="form-control" type="text">
								</div>
							</div> -->
							<div class="form-group">
								<div class="columns pull-right col-md-2"
									style="padding-right: 30%">
									<button type="button" class="btn btn-danger"
										onclick="closeWin()">取消</button>
								</div>
								<!-- 								<div class="columns pull-right "> -->
								<!-- 									<button type="submit" class="btn btn-primary columns">提交附件</button> -->
								<!-- 								</div> -->
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div th:include="include::footer"></div>
	<script src="/js/layui.js"></script>
	<script src="/js/vue.min.js"></script>
	<script src="/js/plugins/layer/layer.min.js"></script>
	<script type="text/javascript"
		src="/js/appjs/sales/onlineFeedback/edit.js">
	</script>

	<!-- 全局js -->
	<!-- 	<script src="/js/jquery.min.js?v=2.1.4"></script> -->
	<script src="/js/bootstrap.min.js?v=3.3.6"></script>
	<script src="/js/bootstrap-paginator.min.js"></script>

	<script src="/js/content.js?v=1.0.0"></script>
	<script src="/js/layui.js"></script>
	<script src="/js/plugins/clipboard/clipboard.min.js"></script>
	<script src="/js/plugins/layer/layer.min.js"></script>
	<script src="/js/vue.min.js"></script>
	<script type="text/javascript">
	//************* 文件下载级显示 *********************************************************		
	 var app = new Vue({
	        el: '#app',
	        data: {
	            limit: 10000,
	            offset: 0,
	            total: 0,
	            file: '',
	            type: '',
	            rows: '',
	            feedbackId:$("#feedbackId").val(),
	        },
	        methods: {
	            getData: function () {
	                $.getJSON("/sales/onlineFeedback/listId", {
	                	limit: this.limit,
	                    offset: this.offset,
	                    type: this.type,
	                    feedbackId:this.feedbackId
	                }, function (r) {
	                    app.total = r.total;
	                    app.rows = r.rows;
// 	                    app.page();
	                });
	            	
	            },
	            page: function () {
	                var options = {
	                    currentPage: app.offset / 3 + 1, //当前页
	                    totalPages: app.total / (3 + 1) + 1, //总页数
	                    numberofPages: 3, //显示的页数
	                    bootstrapMajorVersion: 3,
	                    alignment: 'center',
	                    size: 'large',
	                    shouldShowPage: true,
	                    itemTexts: function (type, page, current) { //修改显示文字
	                        switch (type) {
	                            case "first":
	                                return "首页";
	                            case "prev":
	                                return "上一页";
	                            case "next":
	                                return "下一页";
	                            case "last":
	                                return "尾页";
	                            case "page":
	                                return page;
	                        }
	                    },
	                    onPageClicked: function (event, originalEvent, type, page) {
	                        app.offset = (page - 1) * 3;
	                        app.getData();
	                    }
	                };
	                $('#page').bootstrapPaginator(options);
	            },
	            removeFile: function (id) {
	                layer.confirm('确定要删除选中的记录？', {
	                    btn: ['确定', '取消']
	                }, function () {
	                    $.ajax({
	                        url: "/common/sysFile/remove",
	                        type: "post",
	                        data: {
	                            'id': id
	                        },
	                        success: function (r) {
	                            if (r.code == 0) {
	                                layer.msg(r.msg);
	                                app.getData();
	                            } else {
	                                layer.msg(r.msg);
	                            }
	                        }
	                    });
// 	                    updateOnlineFeedbackAttachment(id);
	                })
	                
	            }
	        },
	        created: function () {
	            this.getData();
	        }
	    });
// 		删除附件文件的同时删除企业客户信息表里面附件字段下的附件id
// 	    function updateOnlineFeedbackAttachment(id){
// 	    	var ids=id+',';//将得到的id加上逗号组合传给mapper里面的id去修改字段下的值
// // 	    	alert(ids)
// 	    	$.ajax({
//                 url: "/sales/onlineFeedback/updateOnlineFeedbackAttachment",
//                 type: "post",
//                 data: {
//                     'id': ids
//                 },
//                 success: function (r) {
//                 	alert(id)
//                     if (r.code == 0) {
                    	
// 						//将feedbackAttachment里面的字段提取出来
//                     	var serviceAtt=$("#feedbackAttachment").val();
// //                     	alert(serviceAtt);
// 						//将feedbackAttachment字段里面查出来的id加上都好替换为'' 空
//                     	var idss=serviceAtt.replace(id+",",'');
// //                     	alert(idss)
// 						//传给feedbackAttachment  input
//                     	$("#feedbackAttachment").val(idss);
//                         layer.msg(r.msg);
//                         app.getData();
//                     } else {
//                         layer.msg(r.msg);
//                     }
//                 }
//             });
// 	    }
	    
//********************** END *************************************	
	</script>
</body>
</html>
